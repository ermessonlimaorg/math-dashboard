Starting deployment of ermessonlimaorg/math-dashboard:main to localhost.
2025-Dec-18 05:58:22.214406
Preparing container with helper image: ghcr.io/coollabsio/coolify-helper:1.0.12
2025-Dec-18 05:58:26.239035
Image not found (ls0kssg44co8g0wo4kgokscg:994768da7f80fb93c307b25ca1a07ff29fc854a5). Building new image.
2025-Dec-18 05:58:26.490223
----------------------------------------
2025-Dec-18 05:58:26.499885
Importing ermessonlimaorg/math-dashboard:main (commit sha 994768da7f80fb93c307b25ca1a07ff29fc854a5) to /artifacts/o400w8048wo80okgoscococc.
2025-Dec-18 05:58:29.207389
Generating nixpacks configuration with: nixpacks plan -f json --env NIXPACKS_NODE_VERSION=22 --env COOLIFY_URL=https://mathia.space --env COOLIFY_FQDN=mathia.space --env COOLIFY_BRANCH=main --env COOLIFY_RESOURCE_UUID=ls0kssg44co8g0wo4kgokscg /artifacts/o400w8048wo80okgoscococc
2025-Dec-18 05:58:30.117942
Found application type: node.
2025-Dec-18 05:58:30.127557
If you need further customization, please check the documentation of Nixpacks: https://nixpacks.com/docs/providers/node
2025-Dec-18 05:58:32.288566
----------------------------------------
2025-Dec-18 05:58:32.295448
Building docker image started.
2025-Dec-18 05:58:32.301690
To check the current progress, click on Show Debug Logs.
2025-Dec-18 05:58:36.731984
========================================
2025-Dec-18 05:58:36.739190
Deployment failed: Command execution failed (exit code 1): docker exec o400w8048wo80okgoscococc bash -c 'bash /artifacts/build.sh'
2025-Dec-18 05:58:36.739190
Error: #0 building with "default" instance using docker driver
2025-Dec-18 05:58:36.739190
2025-Dec-18 05:58:36.739190
#1 [internal] load build definition from Dockerfile
2025-Dec-18 05:58:36.739190
#1 transferring dockerfile: 1.73kB done
2025-Dec-18 05:58:36.739190
#1 DONE 0.0s
2025-Dec-18 05:58:36.739190
2025-Dec-18 05:58:36.739190
#2 [internal] load metadata for ghcr.io/railwayapp/nixpacks:ubuntu-1745885067
2025-Dec-18 05:58:36.739190
#2 DONE 0.5s
2025-Dec-18 05:58:36.739190
2025-Dec-18 05:58:36.739190
#3 [internal] load .dockerignore
2025-Dec-18 05:58:36.739190
#3 transferring context: 77B done
2025-Dec-18 05:58:36.739190
#3 DONE 0.0s
2025-Dec-18 05:58:36.739190
2025-Dec-18 05:58:36.739190
#4 [stage-0  1/11] FROM ghcr.io/railwayapp/nixpacks:ubuntu-1745885067@sha256:d45c89d80e13d7ad0fd555b5130f22a866d9dd10e861f589932303ef2314c7de
2025-Dec-18 05:58:36.739190
#4 resolve ghcr.io/railwayapp/nixpacks:ubuntu-1745885067@sha256:d45c89d80e13d7ad0fd555b5130f22a866d9dd10e861f589932303ef2314c7de 0.0s done
2025-Dec-18 05:58:36.739190
#4 DONE 0.0s
2025-Dec-18 05:58:36.739190
2025-Dec-18 05:58:36.739190
#5 [internal] load build context
2025-Dec-18 05:58:36.739190
#5 transferring context: 1.50MB 0.1s done
2025-Dec-18 05:58:36.739190
#5 DONE 0.1s
2025-Dec-18 05:58:36.739190
2025-Dec-18 05:58:36.739190
#6 [stage-0  3/11] COPY .nixpacks/nixpkgs-ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7.nix .nixpacks/nixpkgs-ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7.nix
2025-Dec-18 05:58:36.739190
#6 CACHED
2025-Dec-18 05:58:36.739190
2025-Dec-18 05:58:36.739190
#7 [stage-0  4/11] RUN nix-env -if .nixpacks/nixpkgs-ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7.nix && nix-collect-garbage -d
2025-Dec-18 05:58:36.739190
#7 CACHED
2025-Dec-18 05:58:36.739190
2025-Dec-18 05:58:36.739190
#8 [stage-0  2/11] WORKDIR /app/
2025-Dec-18 05:58:36.739190
#8 CACHED
2025-Dec-18 05:58:36.739190
2025-Dec-18 05:58:36.739190
#9 [stage-0  5/11] RUN sudo apt-get update && sudo apt-get install -y --no-install-recommends curl wget
2025-Dec-18 05:58:36.739190
#9 CACHED
2025-Dec-18 05:58:36.739190
2025-Dec-18 05:58:36.739190
#10 [stage-0  6/11] COPY . /app/.
2025-Dec-18 05:58:36.739190
#10 DONE 0.1s
2025-Dec-18 05:58:36.739190
2025-Dec-18 05:58:36.739190
#11 [stage-0  7/11] RUN --mount=type=cache,id=ls0kssg44co8g0wo4kgokscg-/root/local/share/pnpm/store/v3,target=/root/.local/share/pnpm/store/v3 pnpm i --frozen-lockfile
2025-Dec-18 05:58:36.739190
#11 0.681  ERR_PNPM_OUTDATED_LOCKFILE  Cannot install with "frozen-lockfile" because pnpm-lock.yaml is not up to date with /package.json
2025-Dec-18 05:58:36.739190
#11 0.681
2025-Dec-18 05:58:36.739190
#11 0.681 Note that in CI environments this setting is true by default. If you still need to run install in such cases, use "pnpm install --no-frozen-lockfile"
2025-Dec-18 05:58:36.739190
#11 0.681
2025-Dec-18 05:58:36.739190
#11 0.681     Failure reason:
2025-Dec-18 05:58:36.739190
#11 0.681     specifiers in the lockfile ({"@next-auth/prisma-adapter":"1.0.7","@prisma/client":"5.17.0","bcryptjs":"2.4.3","clsx":"2.0.0","dayjs":"1.11.10","echarts":"5.5.0","echarts-for-react":"3.0.2","next":"14.2.5","next-auth":"4.24.7","openai":"^4.77.3","react":"18.2.0","react-dom":"18.2.0","react-hot-toast":"2.4.1","zod":"3.23.8","@types/bcryptjs":"2.4.2","@types/node":"20.12.7","@types/react":"18.2.72","autoprefixer":"10.4.19","eslint":"8.57.0","eslint-config-next":"14.2.5","postcss":"8.4.38","prisma":"5.17.0","tailwindcss":"3.4.4","ts-node":"10.9.2","tsx":"4.19.1","typescript":"5.5.3"}) don't match specs in package.json ({"@types/bcryptjs":"2.4.2","@types/node":"20.12.7","@types/react":"18.2.72","autoprefixer":"10.4.19","eslint":"8.57.0","eslint-config-next":"14.2.5","postcss":"8.4.38","prisma":"5.17.0","tailwindcss":"3.4.4","ts-node":"10.9.2","tsx":"4.19.1","typescript":"5.5.3","@next-auth/prisma-adapter":"1.0.7","@prisma/client":"5.17.0","bcryptjs":"2.4.3","clsx":"2.0.0","dayjs":"1.11.10","echarts":"5.5.0","echarts-for-react":"3.0.2","next":"14.2.5","next-auth":"4.24.7","openai":"^4.77.3","react":"18.2.0","react-dom":"18.2.0","react-hot-toast":"2.4.1","react-joyride":"^2.9.3","zod":"3.23.8"})
2025-Dec-18 05:58:36.739190
#11 ERROR: process "/bin/bash -ol pipefail -c pnpm i --frozen-lockfile" did not complete successfully: exit code: 1
2025-Dec-18 05:58:36.739190
------
2025-Dec-18 05:58:36.739190
> [stage-0  7/11] RUN --mount=type=cache,id=ls0kssg44co8g0wo4kgokscg-/root/local/share/pnpm/store/v3,target=/root/.local/share/pnpm/store/v3 pnpm i --frozen-lockfile:
2025-Dec-18 05:58:36.739190
0.681  ERR_PNPM_OUTDATED_LOCKFILE  Cannot install with "frozen-lockfile" because pnpm-lock.yaml is not up to date with /package.json
2025-Dec-18 05:58:36.739190
0.681
2025-Dec-18 05:58:36.739190
0.681 Note that in CI environments this setting is true by default. If you still need to run install in such cases, use "pnpm install --no-frozen-lockfile"
2025-Dec-18 05:58:36.739190
0.681
2025-Dec-18 05:58:36.739190
0.681     Failure reason:
2025-Dec-18 05:58:36.739190
0.681     specifiers in the lockfile ({"@next-auth/prisma-adapter":"1.0.7","@prisma/client":"5.17.0","bcryptjs":"2.4.3","clsx":"2.0.0","dayjs":"1.11.10","echarts":"5.5.0","echarts-for-react":"3.0.2","next":"14.2.5","next-auth":"4.24.7","openai":"^4.77.3","react":"18.2.0","react-dom":"18.2.0","react-hot-toast":"2.4.1","zod":"3.23.8","@types/bcryptjs":"2.4.2","@types/node":"20.12.7","@types/react":"18.2.72","autoprefixer":"10.4.19","eslint":"8.57.0","eslint-config-next":"14.2.5","postcss":"8.4.38","prisma":"5.17.0","tailwindcss":"3.4.4","ts-node":"10.9.2","tsx":"4.19.1","typescript":"5.5.3"}) don't match specs in package.json ({"@types/bcryptjs":"2.4.2","@types/node":"20.12.7","@types/react":"18.2.72","autoprefixer":"10.4.19","eslint":"8.57.0","eslint-config-next":"14.2.5","postcss":"8.4.38","prisma":"5.17.0","tailwindcss":"3.4.4","ts-node":"10.9.2","tsx":"4.19.1","typescript":"5.5.3","@next-auth/prisma-adapter":"1.0.7","@prisma/client":"5.17.0","bcryptjs":"2.4.3","clsx":"2.0.0","dayjs":"1.11.10","echarts":"5.5.0","echarts-for-react":"3.0.2","next":"14.2.5","next-auth":"4.24.7","openai":"^4.77.3","react":"18.2.0","react-dom":"18.2.0","react-hot-toast":"2.4.1","react-joyride":"^2.9.3","zod":"3.23.8"})
2025-Dec-18 05:58:36.739190
------
2025-Dec-18 05:58:36.739190
2025-Dec-18 05:58:36.739190
7 warnings found (use docker --debug to expand):
2025-Dec-18 05:58:36.739190
- SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ARG "NEXTAUTH_SECRET") (line 11)
2025-Dec-18 05:58:36.739190
- SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ARG "OPENAI_API_KEY") (line 11)
2025-Dec-18 05:58:36.739190
- SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ARG "SYNC_API_KEY") (line 11)
2025-Dec-18 05:58:36.739190
- SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ENV "NEXTAUTH_SECRET") (line 12)
2025-Dec-18 05:58:36.739190
- SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ENV "OPENAI_API_KEY") (line 12)
2025-Dec-18 05:58:36.739190
- SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ENV "SYNC_API_KEY") (line 12)
2025-Dec-18 05:58:36.739190
- UndefinedVar: Usage of undefined variable '$NIXPACKS_PATH' (line 18)
2025-Dec-18 05:58:36.739190
Dockerfile:20
2025-Dec-18 05:58:36.739190
--------------------
2025-Dec-18 05:58:36.739190
18 |     ENV NIXPACKS_PATH=/app/node_modules/.bin:$NIXPACKS_PATH
2025-Dec-18 05:58:36.739190
19 |     COPY . /app/.
2025-Dec-18 05:58:36.739190
20 | >>> RUN --mount=type=cache,id=ls0kssg44co8g0wo4kgokscg-/root/local/share/pnpm/store/v3,target=/root/.local/share/pnpm/store/v3 pnpm i --frozen-lockfile
2025-Dec-18 05:58:36.739190
21 |
2025-Dec-18 05:58:36.739190
22 |     # build phase
2025-Dec-18 05:58:36.739190
--------------------
2025-Dec-18 05:58:36.739190
ERROR: failed to build: failed to solve: process "/bin/bash -ol pipefail -c pnpm i --frozen-lockfile" did not complete successfully: exit code: 1
2025-Dec-18 05:58:36.739190
exit status 1
2025-Dec-18 05:58:36.814666
========================================
2025-Dec-18 05:58:36.822924
Deployment failed. Removing the new version of your application.
2025-Dec-18 05:58:38.263133
Gracefully shutting down build container: o400w8048wo80okgoscococc